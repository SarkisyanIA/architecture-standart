### <a name="_b7urdng99y53"></a>**Название задачи:** 
MP-ADR1 MVP Стандарт (Открытие депозитов онлайн)
### <a name="_hjk0fkfyohdk"></a>**Автор:**
Саркисян И.А.
### <a name="_uanumrh8zrui"></a>**Дата:**
25.01.2026
### <a name="_3bfxc9a45514"></a>**Функциональные требования**

| **№** | **Действующие лица или системы**                | **Use Case**              | **Описание**                                                                                                                                                                                                                                                                                                                                                                                                                                |
|:-----:|:------------------------------------------------|:--------------------------|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  UC1  | Клиент, Интернет-банк, АБС                      | Авторизация               | 1. Пользователь заходит в интернет банк, вводит телефон и пароль. 2. Интернет-банк отправляет запрос для АБС, на отправку СМС кода. 3. АБС отправляет СМС с кодом пользователю через СМС-шлюз 4. Пользователь вводит код. 5. При успехе, интернет банк переводит его на главную страницу.                                                                                                                                                   |
|  UC2  | Клиент, Интернет-банк, АБС                      | Просмотр главной страницы | 1. Пользователь находится на главной странице. 2. Интернет-банк идет в АБС за получением доступных депозитов с актуальными ставками и персонализированные ставки лично для него. 3. При успехе, интернет-банк отображает пользователю полученную информацию.                                                                                                                                                                                |
|  UC3  | Клиент, Интернет-банк, АБС, Сотрудник бэк-офиса | Открытие депозита         | 1. Пользователь указывает счет и сумму депозита. 2. Создается заявка в интернет банке и передается в АБС. 3. АБС через СМС-шлюз высылает СМС код для подтверждения. 4. После успешного подтверждения, заявку берет в обработку работник сотрудник бэк-офиса. 5. После успешной обработки заявки, сотрудник бэк-офиса подтверждает заявку в АБС. 6. АБС отправляет через СМС-шлюз СМС-сообщение с подтверждением ставки и открытия депозита. |
### <a name="_u8xz25hbrgql"></a>**Нефункциональные требования**

| **№** | **Требование**                                                                                                               |
|:-----:|:-----------------------------------------------------------------------------------------------------------------------------|
|   U   | Удобство использования (Usability)                                                                                           |
|  U1   | Обеспечить удобный интерфейс                                                                                                 |
|  U2   | Отобразить цвета и символику бренда в интерфейсе                                                                             |
|   R   | Надёжность (Reliability)                                                                                                     |
|  R1   | Доступность 99,9%                                                                                                            |
|  R2   | График работы 24/7                                                                                                           |
|  R3   | Сохранять бэкапы базы данных раз в день и хранить 1 месяц                                                                    |
|  R4   | В случае полного отказа системы, критический для бизнеса функционал должен быть восстановлен не более чем за 2 часа.         |
|  R5   | В случае катастрофического сбоя, максимально допустимая потеря данных транзакций пользователей не должна превышать 15 минут. |
|  R6   | RPS на входе (ingress): 50000 запросов в секунду на все публичные API                                                        |
|   P   | Производительность (Performance)                                                                                             |
|  P1   | Отклик 10 миллисекунд                                                                                                        |
|  P2   | Предусмотреть равномерное горизонтальное масштабирование и распределение запросов между серверами, приложениями и ЦОД        |
|   S   | Поддерживаемость (Supportability)                                                                                            |
|  S1   | Должна быть поддержка модульного и интеграционного тестирования                                                              |
|  S2   | Необходимо вести докумендацию кода для даснейшего расширения системы                                                         |
|  +R   | + Ограничения (Restrictions)                                                                                                 |
|  +R1  | Использовать XLS-файлы для всего опроцесса согласования ставки по заявке с весом не более 60КБ                               |
|  +R2  | СМС-функционал внедрять в ядре АБС                                                                                           |
|  +R3  | СМС-функционал реализовывать собственными силами без привлечения подрядчиков                                                 |
|  +R4  | Использовать технологии, которые уже есть в банке (MS SQL, Oracle, ...)                                                      |
|  +R5  | Не использовать новые технологии, при отсутствии у команды опатыта работы с ними                                             |
|  +R6  | При работе с очередями, использовать Kafka                                                                                   |
|  +R7  | В интернет-банке продумать реализацию функционала открытия депозитов в отдельном микросервисе                                |
|  +R8  | Продумать переход всего функционала интернет-банка на микросервисную архитектуру                                             |
|  +R9  | Придерживаться концепций систем дизайна, принятого в компании                                                                |
| +R10  | БД АБС перегружена, поэтому не грузить ее дополнительным функционалом                                                        |
| +R11  | Избежать прямой работы интернет-банка с API АБС                                                                              |
| +R12  | АБС масштабируется только по вертикали из-за БД                                                                              |
| +R13  | Шифровать данные с сайта только SSH-2 с отключением устаревших и небезопасных алгоритмов                                     |
| +R14  | Шифровать данные с интернет только SSH-2 с отключением устаревших и небезопасных алгоритмов                                  |


### <a name="_qmphm5d6rvi3"></a>**Решение**
[Диаграмм контекста](Task3/Context_diagram_task3.puml)
[Диаграмма контейнеров](Task3/Container_diagram_task3.puml)
Выбранны именно эти технологии, т.к у команды есть опыт работы с ними. Использование брокера между интернет-банком и АБС обусловлено требованим R11. Также это повысит отказоустойчивость системы. 
### <a name="_bjrr7veeh80c"></a>**Альтернативы**
Можно было обойтись без брокера сообщений Kafka и реализовать синхронное взаимодействие между интернет-банком и АБС, но в таком случае увеличились бы увеличилась бы связанность этих компонентов и это ухудшило бы отказоустойчивость системы, т.к при недоступности АБС, не работал бы интерне-банк. 

**Недостатки, ограничения, риски**
- API Gateway является единственной точкой входа для всех клиентов. Его отказ полностью блокирует доступ к интернет-банку для внешних пользователей.
- База данных Oracle (AutomatedBankingSystemDatabase) представлена как единый экземпляр. Её отказ парализует работу всей Automated Banking System (ABS) и, как следствие, обработку всех операций.

